(function($, undefined) {
    var loginBtn = $(".login_btn");
    var usernameInput = $("._username");
    var passwordInput = $("._pwd");
    var ThisPage = {
        init: function() {
            ThisPage.bind();
        },
        bind: function() {
            loginBtn.on('click', function(event) {
                event.preventDefault();
                ThisPage.dologin();
                return false;
            });
        },
        dologin: function() {
            $.ajax({
                url: '/login/_api/dologin',
                type: 'POST',
                dataType: 'json',
                data: {
                    username: usernameInput.val(),
                    password: passwordInput.val()
                },
                cache: false,
            }).done(function(data) {
                if (!data.status) {
                    alert(data.msg);
                } else {
                    window.location.href=next;
                }
            }).fail(function() {
                alert("登录出现异常");
            });
        }
    };
    ThisPage.init();


})(jQuery)
